<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é£²é£Ÿåº—çµŒå–¶è¨ˆç®—ã‚¢ãƒ—ãƒª</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .calculator-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .calculator-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transition: transform 0.3s ease;
        }

        .calculator-card:hover {
            transform: translateY(-5px);
        }

        .calculator-card h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.5em;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-group label {
            display: block;
            margin-bottom: 5px;
            color: #333;
            font-weight: 600;
        }

        .input-group input {
            width: 100%;
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s;
        }

        .input-group input:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            width: 100%;
            padding: 12px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: opacity 0.3s;
            margin-top: 10px;
        }

        .btn:hover {
            opacity: 0.9;
        }

        .result {
            margin-top: 20px;
            padding: 15px;
            background: #f5f5f5;
            border-radius: 8px;
            border-left: 5px solid #667eea;
        }

        .result h3 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #e0e0e0;
        }

        .result-item:last-child {
            border-bottom: none;
        }

        .result-value {
            font-weight: 700;
            color: #764ba2;
            font-size: 1.1em;
        }

        .warning {
            color: #e74c3c;
            font-weight: 700;
        }

        .success {
            color: #27ae60;
            font-weight: 700;
        }

        .info-box {
            background: #e3f2fd;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
            font-size: 0.9em;
            color: #1976d2;
        }

        .diagnosis {
            margin-top: 15px;
            padding: 15px;
            border-radius: 8px;
            border-left: 5px solid #3498db;
        }

        .diagnosis.excellent {
            background: #d4edda;
            border-left-color: #28a745;
        }

        .diagnosis.good {
            background: #d1ecf1;
            border-left-color: #17a2b8;
        }

        .diagnosis.warning {
            background: #fff3cd;
            border-left-color: #ffc107;
        }

        .diagnosis.danger {
            background: #f8d7da;
            border-left-color: #dc3545;
        }

        .diagnosis h4 {
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .diagnosis.excellent h4 {
            color: #28a745;
        }

        .diagnosis.good h4 {
            color: #17a2b8;
        }

        .diagnosis.warning h4 {
            color: #856404;
        }

        .diagnosis.danger h4 {
            color: #721c24;
        }

        .diagnosis p {
            margin: 8px 0;
            line-height: 1.6;
        }

        .diagnosis ul {
            margin: 10px 0;
            padding-left: 20px;
        }

        .diagnosis li {
            margin: 5px 0;
            line-height: 1.5;
        }

        .diagnosis-icon {
            font-size: 1.3em;
            margin-right: 5px;
        }

        @media (max-width: 768px) {
            .calculator-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 1.8em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ½ï¸ é£²é£Ÿåº—çµŒå–¶è¨ˆç®—ã‚¢ãƒ—ãƒª</h1>
            <p>çµŒå–¶ã«å¿…è¦ãªå„ç¨®æŒ‡æ¨™ã‚’ç°¡å˜ã«è¨ˆç®—</p>
        </div>

        <div class="calculator-grid">
            <!-- åŸä¾¡ç‡è¨ˆç®— -->
            <div class="calculator-card">
                <h2>ğŸ“Š åŸä¾¡ç‡è¨ˆç®—</h2>
                <div class="input-group">
                    <label>æ–™ç†ã®åŸä¾¡ï¼ˆå††ï¼‰</label>
                    <input type="number" id="cost" placeholder="ä¾‹: 300">
                </div>
                <div class="input-group">
                    <label>è²©å£²ä¾¡æ ¼ï¼ˆå††ï¼‰</label>
                    <input type="number" id="price" placeholder="ä¾‹: 1000">
                </div>
                <button class="btn" onclick="calculateFoodCost()">è¨ˆç®—ã™ã‚‹</button>
                <div id="foodCostResult"></div>
                <div class="info-box">
                    ğŸ’¡ ç†æƒ³çš„ãªåŸä¾¡ç‡ã¯30%ä»¥ä¸‹ã¨ã•ã‚Œã¦ã„ã¾ã™
                </div>
            </div>

            <!-- æç›Šåˆ†å²ç‚¹è¨ˆç®— -->
            <div class="calculator-card">
                <h2>ğŸ“ˆ æç›Šåˆ†å²ç‚¹è¨ˆç®—</h2>
                <div class="input-group">
                    <label>å›ºå®šè²»ï¼ˆæœˆé¡ãƒ»å††ï¼‰</label>
                    <input type="number" id="fixedCost" placeholder="ä¾‹: 1000000">
                </div>
                <div class="input-group">
                    <label>å¤‰å‹•è²»ç‡ï¼ˆ%ï¼‰</label>
                    <input type="number" id="variableCostRate" placeholder="ä¾‹: 35">
                </div>
                <button class="btn" onclick="calculateBreakEven()">è¨ˆç®—ã™ã‚‹</button>
                <div id="breakEvenResult"></div>
                <div class="info-box">
                    ğŸ’¡ å¤‰å‹•è²»ç‡ = (åŸä¾¡ç‡ + ãã®ä»–å¤‰å‹•è²»ç‡)
                </div>
            </div>

            <!-- FLæ¯”ç‡è¨ˆç®— -->
            <div class="calculator-card">
                <h2>ğŸ‘¥ FLæ¯”ç‡è¨ˆç®—</h2>
                <div class="input-group">
                    <label>å£²ä¸Šé«˜ï¼ˆå††ï¼‰</label>
                    <input type="number" id="flSales" placeholder="ä¾‹: 5000000">
                </div>
                <div class="input-group">
                    <label>åŸä¾¡ï¼ˆFood Costãƒ»å††ï¼‰</label>
                    <input type="number" id="foodCost" placeholder="ä¾‹: 1500000">
                </div>
                <div class="input-group">
                    <label>äººä»¶è²»ï¼ˆLabor Costãƒ»å††ï¼‰</label>
                    <input type="number" id="laborCost" placeholder="ä¾‹: 1250000">
                </div>
                <button class="btn" onclick="calculateFL()">è¨ˆç®—ã™ã‚‹</button>
                <div id="flResult"></div>
                <div class="info-box">
                    ğŸ’¡ ç†æƒ³çš„ãªFLæ¯”ç‡ã¯55%ä»¥ä¸‹ã¨ã•ã‚Œã¦ã„ã¾ã™
                </div>
            </div>

            <!-- å®¢å˜ä¾¡ãƒ»å›è»¢ç‡åˆ†æ -->
            <div class="calculator-card">
                <h2>ğŸ’° å®¢å˜ä¾¡ãƒ»å›è»¢ç‡åˆ†æ</h2>
                <div class="input-group">
                    <label>ç›®æ¨™æœˆå•†ï¼ˆå††ï¼‰</label>
                    <input type="number" id="targetSales" placeholder="ä¾‹: 5000000">
                </div>
                <div class="input-group">
                    <label>å¸­æ•°</label>
                    <input type="number" id="seats" placeholder="ä¾‹: 30">
                </div>
                <div class="input-group">
                    <label>å–¶æ¥­æ—¥æ•°ï¼ˆæ—¥/æœˆï¼‰</label>
                    <input type="number" id="openDays" placeholder="ä¾‹: 26">
                </div>
                <div class="input-group">
                    <label>å¸Œæœ›å®¢å˜ä¾¡ï¼ˆå††ï¼‰</label>
                    <input type="number" id="avgSpend" placeholder="ä¾‹: 3000">
                </div>
                <button class="btn" onclick="calculateTurnover()">è¨ˆç®—ã™ã‚‹</button>
                <div id="turnoverResult"></div>
                <div class="info-box">
                    ğŸ’¡ å›è»¢ç‡ = å¿…è¦å®¢æ•° Ã· (å¸­æ•° Ã— å–¶æ¥­æ—¥æ•°)
                </div>
            </div>

            <!-- äººä»¶è²»ç®¡ç† -->
            <div class="calculator-card">
                <h2>â° äººä»¶è²»ç®¡ç†</h2>
                <div class="input-group">
                    <label>ã‚¹ã‚¿ãƒƒãƒ•æ•°</label>
                    <input type="number" id="staffCount" placeholder="ä¾‹: 5">
                </div>
                <div class="input-group">
                    <label>å¹³å‡æ™‚çµ¦ï¼ˆå††ï¼‰</label>
                    <input type="number" id="hourlyWage" placeholder="ä¾‹: 1200">
                </div>
                <div class="input-group">
                    <label>1æ—¥ã®å¹³å‡åŠ´åƒæ™‚é–“</label>
                    <input type="number" id="workHours" placeholder="ä¾‹: 8">
                </div>
                <div class="input-group">
                    <label>å–¶æ¥­æ—¥æ•°ï¼ˆæ—¥/æœˆï¼‰</label>
                    <input type="number" id="laborDays" placeholder="ä¾‹: 26">
                </div>
                <div class="input-group">
                    <label>æœˆå•†ï¼ˆå††ï¼‰</label>
                    <input type="number" id="monthlySales" placeholder="ä¾‹: 5000000">
                </div>
                <button class="btn" onclick="calculateLabor()">è¨ˆç®—ã™ã‚‹</button>
                <div id="laborResult"></div>
                <div class="info-box">
                    ğŸ’¡ ç†æƒ³çš„ãªäººä»¶è²»ç‡ã¯30%ä»¥ä¸‹ã¨ã•ã‚Œã¦ã„ã¾ã™
                </div>
            </div>

            <!-- ç›®æ¨™é”æˆè¨ˆç®— -->
            <div class="calculator-card">
                <h2>ğŸ¯ ç›®æ¨™é”æˆè¨ˆç®—</h2>
                <div class="input-group">
                    <label>ç›®æ¨™å–¶æ¥­åˆ©ç›Šï¼ˆå††/æœˆï¼‰</label>
                    <input type="number" id="targetProfit" placeholder="ä¾‹: 500000">
                </div>
                <div class="input-group">
                    <label>å›ºå®šè²»åˆè¨ˆï¼ˆå††/æœˆï¼‰</label>
                    <input type="number" id="totalFixed" placeholder="ä¾‹: 1000000">
                </div>
                <div class="input-group">
                    <label>åŸä¾¡ç‡ï¼ˆ%ï¼‰</label>
                    <input type="number" id="costRate" placeholder="ä¾‹: 30">
                </div>
                <div class="input-group">
                    <label>äººä»¶è²»ç‡ï¼ˆ%ï¼‰</label>
                    <input type="number" id="laborRate" placeholder="ä¾‹: 25">
                </div>
                <button class="btn" onclick="calculateTarget()">è¨ˆç®—ã™ã‚‹</button>
                <div id="targetResult"></div>
                <div class="info-box">
                    ğŸ’¡ å¿…è¦å£²ä¸Š = (å›ºå®šè²» + ç›®æ¨™åˆ©ç›Š) Ã· (1 - å¤‰å‹•è²»ç‡)
                </div>
            </div>
        </div>
    </div>

    <script>
        // åŸä¾¡ç‡è¨ˆç®—
        function calculateFoodCost() {
            const cost = parseFloat(document.getElementById('cost').value);
            const price = parseFloat(document.getElementById('price').value);
            
            if (!cost || !price) {
                alert('ã™ã¹ã¦ã®é …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }
            
            const costRate = (cost / price * 100).toFixed(2);
            const profit = price - cost;
            const profitRate = (profit / price * 100).toFixed(2);
            
            let statusClass = costRate <= 30 ? 'success' : 'warning';
            let statusText = costRate <= 30 ? 'âœ“ é©æ­£ç¯„å›²å†…' : 'âš  åŸä¾¡ç‡ãŒé«˜ã‚ã§ã™';
            
            // è¨ºæ–­çµæœã®ç”Ÿæˆ
            let diagnosis = getDiagnosisFoodCost(parseFloat(costRate));
            
            document.getElementById('foodCostResult').innerHTML = `
                <div class="result">
                    <h3>è¨ˆç®—çµæœ</h3>
                    <div class="result-item">
                        <span>åŸä¾¡ç‡</span>
                        <span class="result-value ${statusClass}">${costRate}%</span>
                    </div>
                    <div class="result-item">
                        <span>ç²—åˆ©ç›Š</span>
                        <span class="result-value">${profit.toLocaleString()}å††</span>
                    </div>
                    <div class="result-item">
                        <span>ç²—åˆ©ç›Šç‡</span>
                        <span class="result-value">${profitRate}%</span>
                    </div>
                    <div class="result-item">
                        <span>è©•ä¾¡</span>
                        <span class="${statusClass}">${statusText}</span>
                    </div>
                </div>
                ${diagnosis}
            `;
        }

        // æç›Šåˆ†å²ç‚¹è¨ˆç®—
        function calculateBreakEven() {
            const fixedCost = parseFloat(document.getElementById('fixedCost').value);
            const variableCostRate = parseFloat(document.getElementById('variableCostRate').value);
            
            if (!fixedCost || !variableCostRate) {
                alert('ã™ã¹ã¦ã®é …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }
            
            const breakEvenSales = fixedCost / (1 - variableCostRate / 100);
            const dailySales = breakEvenSales / 30;
            const marginalProfitRate = 100 - variableCostRate;
            
            // è¨ºæ–­çµæœã®ç”Ÿæˆ
            let diagnosis = getDiagnosisBreakEven(marginalProfitRate);
            
            document.getElementById('breakEvenResult').innerHTML = `
                <div class="result">
                    <h3>è¨ˆç®—çµæœ</h3>
                    <div class="result-item">
                        <span>æç›Šåˆ†å²ç‚¹å£²ä¸Šï¼ˆæœˆï¼‰</span>
                        <span class="result-value">${breakEvenSales.toLocaleString()}å††</span>
                    </div>
                    <div class="result-item">
                        <span>æç›Šåˆ†å²ç‚¹å£²ä¸Šï¼ˆæ—¥ï¼‰</span>
                        <span class="result-value">${dailySales.toLocaleString()}å††</span>
                    </div>
                    <div class="result-item">
                        <span>é™ç•Œåˆ©ç›Šç‡</span>
                        <span class="result-value">${marginalProfitRate.toFixed(2)}%</span>
                    </div>
                </div>
                ${diagnosis}
            `;
        }

        // FLæ¯”ç‡è¨ˆç®—
        function calculateFL() {
            const sales = parseFloat(document.getElementById('flSales').value);
            const food = parseFloat(document.getElementById('foodCost').value);
            const labor = parseFloat(document.getElementById('laborCost').value);
            
            if (!sales || !food || !labor) {
                alert('ã™ã¹ã¦ã®é …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }
            
            const flRatio = ((food + labor) / sales * 100).toFixed(2);
            const foodRate = (food / sales * 100).toFixed(2);
            const laborRate = (labor / sales * 100).toFixed(2);
            
            let statusClass = flRatio <= 55 ? 'success' : 'warning';
            let statusText = flRatio <= 55 ? 'âœ“ é©æ­£ç¯„å›²å†…' : 'âš  FLæ¯”ç‡ãŒé«˜ã‚ã§ã™';
            
            // è¨ºæ–­çµæœã®ç”Ÿæˆ
            let diagnosis = getDiagnosisFL(parseFloat(flRatio), parseFloat(foodRate), parseFloat(laborRate));
            
            document.getElementById('flResult').innerHTML = `
                <div class="result">
                    <h3>è¨ˆç®—çµæœ</h3>
                    <div class="result-item">
                        <span>FLæ¯”ç‡</span>
                        <span class="result-value ${statusClass}">${flRatio}%</span>
                    </div>
                    <div class="result-item">
                        <span>Fæ¯”ç‡ï¼ˆåŸä¾¡ç‡ï¼‰</span>
                        <span class="result-value">${foodRate}%</span>
                    </div>
                    <div class="result-item">
                        <span>Læ¯”ç‡ï¼ˆäººä»¶è²»ç‡ï¼‰</span>
                        <span class="result-value">${laborRate}%</span>
                    </div>
                    <div class="result-item">
                        <span>è©•ä¾¡</span>
                        <span class="${statusClass}">${statusText}</span>
                    </div>
                </div>
                ${diagnosis}
            `;
        }

        // å®¢å˜ä¾¡ãƒ»å›è»¢ç‡åˆ†æ
        function calculateTurnover() {
            const targetSales = parseFloat(document.getElementById('targetSales').value);
            const seats = parseFloat(document.getElementById('seats').value);
            const openDays = parseFloat(document.getElementById('openDays').value);
            const avgSpend = parseFloat(document.getElementById('avgSpend').value);
            
            if (!targetSales || !seats || !openDays || !avgSpend) {
                alert('ã™ã¹ã¦ã®é …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }
            
            const requiredCustomers = Math.ceil(targetSales / avgSpend);
            const dailyCustomers = Math.ceil(requiredCustomers / openDays);
            const turnoverRate = (dailyCustomers / seats).toFixed(2);
            
            let statusClass = turnoverRate <= 3 ? 'success' : 'warning';
            let statusText = turnoverRate <= 3 ? 'âœ“ å®Ÿç¾å¯èƒ½ãªç›®æ¨™' : 'âš  é«˜ã„å›è»¢ç‡ãŒå¿…è¦ã§ã™';
            
            // è¨ºæ–­çµæœã®ç”Ÿæˆ
            let diagnosis = getDiagnosisTurnover(parseFloat(turnoverRate), avgSpend);
            
            document.getElementById('turnoverResult').innerHTML = `
                <div class="result">
                    <h3>è¨ˆç®—çµæœ</h3>
                    <div class="result-item">
                        <span>å¿…è¦å®¢æ•°ï¼ˆæœˆï¼‰</span>
                        <span class="result-value">${requiredCustomers.toLocaleString()}äºº</span>
                    </div>
                    <div class="result-item">
                        <span>å¿…è¦å®¢æ•°ï¼ˆæ—¥ï¼‰</span>
                        <span class="result-value">${dailyCustomers.toLocaleString()}äºº</span>
                    </div>
                    <div class="result-item">
                        <span>å¿…è¦å›è»¢ç‡</span>
                        <span class="result-value ${statusClass}">${turnoverRate}å›è»¢</span>
                    </div>
                    <div class="result-item">
                        <span>è©•ä¾¡</span>
                        <span class="${statusClass}">${statusText}</span>
                    </div>
                </div>
                ${diagnosis}
            `;
        }

        // äººä»¶è²»ç®¡ç†
        function calculateLabor() {
            const staffCount = parseFloat(document.getElementById('staffCount').value);
            const hourlyWage = parseFloat(document.getElementById('hourlyWage').value);
            const workHours = parseFloat(document.getElementById('workHours').value);
            const laborDays = parseFloat(document.getElementById('laborDays').value);
            const monthlySales = parseFloat(document.getElementById('monthlySales').value);
            
            if (!staffCount || !hourlyWage || !workHours || !laborDays || !monthlySales) {
                alert('ã™ã¹ã¦ã®é …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }
            
            const totalLaborCost = staffCount * hourlyWage * workHours * laborDays;
            const laborCostRate = (totalLaborCost / monthlySales * 100).toFixed(2);
            const dailyLaborCost = (totalLaborCost / laborDays).toFixed(0);
            
            let statusClass = laborCostRate <= 30 ? 'success' : 'warning';
            let statusText = laborCostRate <= 30 ? 'âœ“ é©æ­£ç¯„å›²å†…' : 'âš  äººä»¶è²»ç‡ãŒé«˜ã‚ã§ã™';
            
            // è¨ºæ–­çµæœã®ç”Ÿæˆ
            let diagnosis = getDiagnosisLabor(parseFloat(laborCostRate));
            
            document.getElementById('laborResult').innerHTML = `
                <div class="result">
                    <h3>è¨ˆç®—çµæœ</h3>
                    <div class="result-item">
                        <span>æœˆé–“äººä»¶è²»</span>
                        <span class="result-value">${totalLaborCost.toLocaleString()}å††</span>
                    </div>
                    <div class="result-item">
                        <span>1æ—¥ã‚ãŸã‚Šäººä»¶è²»</span>
                        <span class="result-value">${parseInt(dailyLaborCost).toLocaleString()}å††</span>
                    </div>
                    <div class="result-item">
                        <span>äººä»¶è²»ç‡</span>
                        <span class="result-value ${statusClass}">${laborCostRate}%</span>
                    </div>
                    <div class="result-item">
                        <span>è©•ä¾¡</span>
                        <span class="${statusClass}">${statusText}</span>
                    </div>
                </div>
                ${diagnosis}
            `;
        }

        // ç›®æ¨™é”æˆè¨ˆç®—
        function calculateTarget() {
            const targetProfit = parseFloat(document.getElementById('targetProfit').value);
            const totalFixed = parseFloat(document.getElementById('totalFixed').value);
            const costRate = parseFloat(document.getElementById('costRate').value);
            const laborRate = parseFloat(document.getElementById('laborRate').value);
            
            if (!targetProfit || !totalFixed || !costRate || !laborRate) {
                alert('ã™ã¹ã¦ã®é …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }
            
            const variableRate = costRate + laborRate;
            const requiredSales = (totalFixed + targetProfit) / (1 - variableRate / 100);
            const dailySales = requiredSales / 30;
            const profitRate = (targetProfit / requiredSales * 100).toFixed(2);
            
            // è¨ºæ–­çµæœã®ç”Ÿæˆ
            let diagnosis = getDiagnosisTarget(parseFloat(profitRate), variableRate);
            
            document.getElementById('targetResult').innerHTML = `
                <div class="result">
                    <h3>è¨ˆç®—çµæœ</h3>
                    <div class="result-item">
                        <span>å¿…è¦æœˆå•†</span>
                        <span class="result-value">${requiredSales.toLocaleString()}å††</span>
                    </div>
                    <div class="result-item">
                        <span>å¿…è¦æ—¥å•†</span>
                        <span class="result-value">${dailySales.toLocaleString()}å††</span>
                    </div>
                    <div class="result-item">
                        <span>ç›®æ¨™å–¶æ¥­åˆ©ç›Šç‡</span>
                        <span class="result-value">${profitRate}%</span>
                    </div>
                    <div class="result-item">
                        <span>å¤‰å‹•è²»ç‡åˆè¨ˆ</span>
                        <span class="result-value">${variableRate}%</span>
                    </div>
                </div>
                ${diagnosis}
            `;
        }

        // è¨ºæ–­é–¢æ•°ç¾¤
        function getDiagnosisFoodCost(costRate) {
            if (costRate <= 25) {
                return `
                    <div class="diagnosis excellent">
                        <h4><span class="diagnosis-icon">ğŸŒŸ</span>å„ªç§€ãªåŸä¾¡ç®¡ç†</h4>
                        <p>åŸä¾¡ç‡ãŒ25%ä»¥ä¸‹ã¨éå¸¸ã«å„ªã‚Œã¦ã„ã¾ã™ã€‚ã“ã®æ°´æº–ã‚’ç¶­æŒã§ãã‚Œã°é«˜ã„åç›Šæ€§ãŒæœŸå¾…ã§ãã¾ã™ã€‚</p>
                        <ul>
                            <li>âœ“ é«˜ã„ç²—åˆ©ç›Šç‡ã‚’ç¢ºä¿ã§ãã¦ã„ã¾ã™</li>
                            <li>âœ“ ä¾¡æ ¼è¨­å®šãŒé©åˆ‡ã§ã€ä»˜åŠ ä¾¡å€¤ãŒé«˜ã„çŠ¶æ…‹ã§ã™</li>
                            <li>âœ“ ä»–ã®çµŒè²»ã¸ã®ä½™è£•ãŒã‚ã‚Šã€çµŒå–¶ã®å®‰å®šæ€§ãŒé«˜ã„ã§ã™</li>
                        </ul>
                        <p><strong>ã‚¢ãƒ‰ãƒã‚¤ã‚¹ï¼š</strong>ã“ã®å„ªã‚ŒãŸåŸä¾¡ç®¡ç†ã‚’ç¶™ç¶šã—ã¤ã¤ã€å“è³ªç¶­æŒã«ã‚‚æ³¨æ„ã‚’æ‰•ã„ã¾ã—ã‚‡ã†ã€‚</p>
                    </div>
                `;
            } else if (costRate <= 30) {
                return `
                    <div class="diagnosis good">
                        <h4><span class="diagnosis-icon">ğŸ‘</span>é©æ­£ãªåŸä¾¡ç‡</h4>
                        <p>åŸä¾¡ç‡ãŒ30%ä»¥ä¸‹ã§ã€æ¥­ç•Œæ¨™æº–ã®é©æ­£ç¯„å›²å†…ã§ã™ã€‚å¥å…¨ãªçµŒå–¶ãŒè¡Œãˆã¦ã„ã¾ã™ã€‚</p>
                        <ul>
                            <li>âœ“ æ¨™æº–çš„ãªåç›Šæ€§ã‚’ç¢ºä¿ã§ãã¦ã„ã¾ã™</li>
                            <li>âœ“ ä¾¡æ ¼ã¨åŸä¾¡ã®ãƒãƒ©ãƒ³ã‚¹ãŒå–ã‚Œã¦ã„ã¾ã™</li>
                            <li>âœ“ å®‰å®šã—ãŸçµŒå–¶ãŒå¯èƒ½ãªæ°´æº–ã§ã™</li>
                        </ul>
                        <p><strong>ã‚¢ãƒ‰ãƒã‚¤ã‚¹ï¼š</strong>ä»•å…¥ã‚Œå…ˆã®è¦‹ç›´ã—ã‚„ãƒ­ã‚¹å‰Šæ¸›ã§ã€ã•ã‚‰ãªã‚‹æ”¹å–„ã®ä½™åœ°ãŒã‚ã‚Šã¾ã™ã€‚</p>
                    </div>
                `;
            } else if (costRate <= 35) {
                return `
                    <div class="diagnosis warning">
                        <h4><span class="diagnosis-icon">âš ï¸</span>ã‚„ã‚„é«˜ã‚ã®åŸä¾¡ç‡</h4>
                        <p>åŸä¾¡ç‡ãŒ30%ã‚’è¶…ãˆã¦ã„ã¾ã™ã€‚åç›Šæ€§ã®æ”¹å–„ãŒå¿…è¦ã§ã™ã€‚</p>
                        <ul>
                            <li>âš  ç²—åˆ©ç›Šç‡ãŒåœ§è¿«ã•ã‚Œã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™</li>
                            <li>âš  ä»–ã®çµŒè²»ã¸ã®ä½™è£•ãŒå°‘ãªããªã£ã¦ã„ã¾ã™</li>
                            <li>âš  åˆ©ç›Šç¢ºä¿ãŒé›£ã—ããªã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™</li>
                        </ul>
                        <p><strong>æ”¹å–„ç­–ï¼š</strong></p>
                        <ul>
                            <li>â€¢ ä»•å…¥ã‚Œå…ˆã®è¦‹ç›´ã—ã¨ä¾¡æ ¼äº¤æ¸‰</li>
                            <li>â€¢ ãƒ¡ãƒ‹ãƒ¥ãƒ¼ä¾¡æ ¼ã®é©æ­£åŒ–æ¤œè¨</li>
                            <li>â€¢ é£Ÿæãƒ­ã‚¹ã®å‰Šæ¸›</li>
                            <li>â€¢ é«˜åŸä¾¡ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®è¦‹ç›´ã—</li>
                        </ul>
                    </div>
                `;
            } else {
                return `
                    <div class="diagnosis danger">
                        <h4><span class="diagnosis-icon">ğŸš¨</span>å±é™ºãªåŸä¾¡ç‡</h4>
                        <p>åŸä¾¡ç‡ãŒ35%ã‚’è¶…ãˆã¦ã„ã¾ã™ã€‚æ—©æ€¥ãªæ”¹å–„ãŒå¿…è¦ã§ã™ã€‚ã“ã®ã¾ã¾ã§ã¯åˆ©ç›Šç¢ºä¿ãŒå›°é›£ã§ã™ã€‚</p>
                        <ul>
                            <li>ğŸš¨ ç²—åˆ©ç›Šç‡ãŒå¤§å¹…ã«åœ§è¿«ã•ã‚Œã¦ã„ã¾ã™</li>
                            <li>ğŸš¨ å–¶æ¥­åˆ©ç›Šã®ç¢ºä¿ãŒéå¸¸ã«å›°é›£ãªçŠ¶æ…‹ã§ã™</li>
                            <li>ğŸš¨ èµ¤å­—çµŒå–¶ã®ãƒªã‚¹ã‚¯ãŒé«˜ã„ã§ã™</li>
                        </ul>
                        <p><strong>ç·Šæ€¥æ”¹å–„ç­–ï¼š</strong></p>
                        <ul>
                            <li>â€¢ å³åº§ã«ä»•å…¥ã‚Œä¾¡æ ¼ã®è¦‹ç›´ã—ã‚’å®Ÿæ–½</li>
                            <li>â€¢ ãƒ¡ãƒ‹ãƒ¥ãƒ¼ä¾¡æ ¼ã®å€¤ä¸Šã’ã‚’æ¤œè¨</li>
                            <li>â€¢ é«˜åŸä¾¡ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®å»ƒæ­¢ã¾ãŸã¯æ”¹å–„</li>
                            <li>â€¢ é£Ÿæã®å»ƒæ£„ãƒ­ã‚¹ã‚’å¾¹åº•çš„ã«å‰Šæ¸›</li>
                            <li>â€¢ ãƒ¬ã‚·ãƒ”ã®è¦‹ç›´ã—ã¨æ¨™æº–åŒ–</li>
                        </ul>
                    </div>
                `;
            }
        }

        function getDiagnosisBreakEven(marginalProfitRate) {
            if (marginalProfitRate >= 60) {
                return `
                    <div class="diagnosis excellent">
                        <h4><span class="diagnosis-icon">ğŸŒŸ</span>å„ªç§€ãªåç›Šæ§‹é€ </h4>
                        <p>é™ç•Œåˆ©ç›Šç‡ãŒ60%ä»¥ä¸Šã¨éå¸¸ã«é«˜ãã€åç›Šæ€§ã®é«˜ã„ãƒ“ã‚¸ãƒã‚¹ãƒ¢ãƒ‡ãƒ«ã§ã™ã€‚</p>
                        <ul>
                            <li>âœ“ æç›Šåˆ†å²ç‚¹ãŒä½ãã€åˆ©ç›Šã‚’å‡ºã—ã‚„ã™ã„æ§‹é€ ã§ã™</li>
                            <li>âœ“ å£²ä¸Šå¢—åŠ æ™‚ã®åˆ©ç›Šè²¢çŒ®åº¦ãŒé«˜ã„ã§ã™</li>
                            <li>âœ“ çµŒå–¶ã®å®‰å®šæ€§ãŒéå¸¸ã«é«˜ã„ã§ã™</li>
                        </ul>
                        <p><strong>ã‚¢ãƒ‰ãƒã‚¤ã‚¹ï¼š</strong>ã“ã®å„ªã‚ŒãŸåç›Šæ§‹é€ ã‚’æ´»ã‹ã—ã¦ã€ç©æ¥µçš„ãªæŠ•è³‡ã‚„äº‹æ¥­æ‹¡å¤§ã‚’æ¤œè¨ã§ãã¾ã™ã€‚</p>
                    </div>
                `;
            } else if (marginalProfitRate >= 50) {
                return `
                    <div class="diagnosis good">
                        <h4><span class="diagnosis-icon">ğŸ‘</span>å¥å…¨ãªåç›Šæ§‹é€ </h4>
                        <p>é™ç•Œåˆ©ç›Šç‡ãŒ50%ä»¥ä¸Šã§ã€æ¨™æº–çš„ãªåç›Šæ€§ã‚’ç¢ºä¿ã§ãã¦ã„ã¾ã™ã€‚</p>
                        <ul>
                            <li>âœ“ é©æ­£ãªæç›Šåˆ†å²ç‚¹ã§ã™</li>
                            <li>âœ“ å£²ä¸Šå¢—åŠ ãŒåˆ©ç›Šã«çµã³ã¤ãã‚„ã™ã„æ§‹é€ ã§ã™</li>
                            <li>âœ“ å®‰å®šã—ãŸçµŒå–¶ãŒå¯èƒ½ã§ã™</li>
                        </ul>
                        <p><strong>ã‚¢ãƒ‰ãƒã‚¤ã‚¹ï¼š</strong>å¤‰å‹•è²»ã®ç®¡ç†ã‚’å¾¹åº•ã—ã€ã•ã‚‰ãªã‚‹åç›Šæ€§å‘ä¸Šã‚’ç›®æŒ‡ã—ã¾ã—ã‚‡ã†ã€‚</p>
                    </div>
                `;
            } else if (marginalProfitRate >= 40) {
                return `
                    <div class="diagnosis warning">
                        <h4><span class="diagnosis-icon">âš ï¸</span>æ”¹å–„ãŒå¿…è¦ãªåç›Šæ§‹é€ </h4>
                        <p>é™ç•Œåˆ©ç›Šç‡ãŒ50%ã‚’ä¸‹å›ã£ã¦ã„ã¾ã™ã€‚å¤‰å‹•è²»ã®è¦‹ç›´ã—ãŒå¿…è¦ã§ã™ã€‚</p>
                        <ul>
                            <li>âš  æç›Šåˆ†å²ç‚¹ãŒé«˜ã‚ã§ã™</li>
                            <li>âš  å¤šãã®å£²ä¸ŠãŒå¿…è¦ã«ãªã‚Šã¾ã™</li>
                            <li>âš  åˆ©ç›Šç¢ºä¿ãŒé›£ã—ã„æ§‹é€ ã§ã™</li>
                        </ul>
                        <p><strong>æ”¹å–„ç­–ï¼š</strong></p>
                        <ul>
                            <li>â€¢ åŸä¾¡ç‡ã®å‰Šæ¸›</li>
                            <li>â€¢ å¤‰å‹•è²»å…¨ä½“ã®è¦‹ç›´ã—</li>
                            <li>â€¢ åŠ¹ç‡çš„ãªã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ§‹ç¯‰</li>
                        </ul>
                    </div>
                `;
            } else {
                return `
                    <div class="diagnosis danger">
                        <h4><span class="diagnosis-icon">ğŸš¨</span>å±é™ºãªåç›Šæ§‹é€ </h4>
                        <p>é™ç•Œåˆ©ç›Šç‡ãŒ40%ã‚’ä¸‹å›ã£ã¦ã„ã¾ã™ã€‚æ—©æ€¥ãªæ”¹å–„ãŒå¿…è¦ã§ã™ã€‚</p>
                        <ul>
                            <li>ğŸš¨ æç›Šåˆ†å²ç‚¹ãŒéå¸¸ã«é«˜ã„ã§ã™</li>
                            <li>ğŸš¨ åˆ©ç›Šã‚’å‡ºã™ã“ã¨ãŒæ¥µã‚ã¦å›°é›£ã§ã™</li>
                            <li>ğŸš¨ ãƒ“ã‚¸ãƒã‚¹ãƒ¢ãƒ‡ãƒ«ã®æ ¹æœ¬çš„è¦‹ç›´ã—ãŒå¿…è¦ã§ã™</li>
                        </ul>
                        <p><strong>ç·Šæ€¥æ”¹å–„ç­–ï¼š</strong></p>
                        <ul>
                            <li>â€¢ åŸä¾¡ç‡ã®å¤§å¹…å‰Šæ¸›</li>
                            <li>â€¢ ä¾¡æ ¼è¨­å®šã®å…¨é¢è¦‹ç›´ã—</li>
                            <li>â€¢ ãƒ“ã‚¸ãƒã‚¹ãƒ¢ãƒ‡ãƒ«ã®å†æ§‹ç¯‰æ¤œè¨</li>
                        </ul>
                    </div>
                `;
            }
        }

        function getDiagnosisFL(flRatio, foodRate, laborRate) {
            let diagnosis = '';
            
            if (flRatio <= 50) {
                diagnosis = `
                    <div class="diagnosis excellent">
                        <h4><span class="diagnosis-icon">ğŸŒŸ</span>å„ªç§€ãªFLæ¯”ç‡</h4>
                        <p>FLæ¯”ç‡ãŒ50%ä»¥ä¸‹ã¨éå¸¸ã«å„ªã‚Œã¦ã„ã¾ã™ã€‚é«˜ã„åç›Šæ€§ã‚’å®Ÿç¾ã§ãã¦ã„ã¾ã™ã€‚</p>
                        <ul>
                            <li>âœ“ åŸä¾¡ã¨äººä»¶è²»ã®ãƒãƒ©ãƒ³ã‚¹ãŒå„ªç§€ã§ã™</li>
                            <li>âœ“ é«˜ã„å–¶æ¥­åˆ©ç›Šç‡ãŒæœŸå¾…ã§ãã¾ã™</li>
                            <li>âœ“ çµŒå–¶ã®å®‰å®šæ€§ãŒéå¸¸ã«é«˜ã„ã§ã™</li>
                        </ul>
                `;
            } else if (flRatio <= 55) {
                diagnosis = `
                    <div class="diagnosis good">
                        <h4><span class="diagnosis-icon">ğŸ‘</span>é©æ­£ãªFLæ¯”ç‡</h4>
                        <p>FLæ¯”ç‡ãŒ55%ä»¥ä¸‹ã§ã€æ¥­ç•Œæ¨™æº–ã®é©æ­£ç¯„å›²å†…ã§ã™ã€‚</p>
                        <ul>
                            <li>âœ“ åŸä¾¡ã¨äººä»¶è²»ã®ãƒãƒ©ãƒ³ã‚¹ãŒè‰¯å¥½ã§ã™</li>
                            <li>âœ“ æ¨™æº–çš„ãªåç›Šæ€§ã‚’ç¢ºä¿ã§ãã¦ã„ã¾ã™</li>
                            <li>âœ“ å¥å…¨ãªçµŒå–¶çŠ¶æ…‹ã§ã™</li>
                        </ul>
                `;
            } else if (flRatio <= 60) {
                diagnosis = `
                    <div class="diagnosis warning">
                        <h4><span class="diagnosis-icon">âš ï¸</span>ã‚„ã‚„é«˜ã‚ã®FLæ¯”ç‡</h4>
                        <p>FLæ¯”ç‡ãŒ55%ã‚’è¶…ãˆã¦ã„ã¾ã™ã€‚æ”¹å–„ã®ä½™åœ°ãŒã‚ã‚Šã¾ã™ã€‚</p>
                        <ul>
                            <li>âš  å–¶æ¥­åˆ©ç›Šç‡ãŒåœ§è¿«ã•ã‚Œã¦ã„ã¾ã™</li>
                            <li>âš  åŸä¾¡ã¾ãŸã¯äººä»¶è²»ã®è¦‹ç›´ã—ãŒå¿…è¦ã§ã™</li>
                            <li>âš  åç›Šæ€§ã®æ”¹å–„ãŒæ±‚ã‚ã‚‰ã‚Œã¾ã™</li>
                        </ul>
                `;
            } else {
                diagnosis = `
                    <div class="diagnosis danger">
                        <h4><span class="diagnosis-icon">ğŸš¨</span>å±é™ºãªFLæ¯”ç‡</h4>
                        <p>FLæ¯”ç‡ãŒ60%ã‚’è¶…ãˆã¦ã„ã¾ã™ã€‚æ—©æ€¥ãªæ”¹å–„ãŒå¿…è¦ã§ã™ã€‚</p>
                        <ul>
                            <li>ğŸš¨ å–¶æ¥­åˆ©ç›Šã®ç¢ºä¿ãŒéå¸¸ã«å›°é›£ã§ã™</li>
                            <li>ğŸš¨ åŸä¾¡ã¨äººä»¶è²»ãŒå£²ä¸Šã‚’åœ§è¿«ã—ã¦ã„ã¾ã™</li>
                            <li>ğŸš¨ èµ¤å­—çµŒå–¶ã®ãƒªã‚¹ã‚¯ãŒé«˜ã„ã§ã™</li>
                        </ul>
                `;
            }

            // Fæ¯”ç‡ã¨Læ¯”ç‡ã®å€‹åˆ¥è¨ºæ–­
            let fDiagnosis = '';
            let lDiagnosis = '';

            if (foodRate > 32) {
                fDiagnosis = '<li>â€¢ <strong>Fæ¯”ç‡ï¼ˆåŸä¾¡ç‡ï¼‰ï¼š</strong>é«˜ã‚ã§ã™ã€‚ä»•å…¥ã‚Œå…ˆã®è¦‹ç›´ã—ã‚„é£Ÿæãƒ­ã‚¹å‰Šæ¸›ãŒå¿…è¦ã§ã™</li>';
            } else if (foodRate < 28) {
                fDiagnosis = '<li>â€¢ <strong>Fæ¯”ç‡ï¼ˆåŸä¾¡ç‡ï¼‰ï¼š</strong>å„ªç§€ã§ã™ã€‚ã“ã®æ°´æº–ã‚’ç¶­æŒã—ã¾ã—ã‚‡ã†</li>';
            }

            if (laborRate > 32) {
                lDiagnosis = '<li>â€¢ <strong>Læ¯”ç‡ï¼ˆäººä»¶è²»ç‡ï¼‰ï¼š</strong>é«˜ã‚ã§ã™ã€‚ã‚·ãƒ•ãƒˆç®¡ç†ã®è¦‹ç›´ã—ã‚„ç”Ÿç”£æ€§å‘ä¸ŠãŒå¿…è¦ã§ã™</li>';
            } else if (laborRate < 28) {
                lDiagnosis = '<li>â€¢ <strong>Læ¯”ç‡ï¼ˆäººä»¶è²»ç‡ï¼‰ï¼š</strong>å„ªç§€ã§ã™ã€‚é©æ­£ãªäººå“¡é…ç½®ãŒã§ãã¦ã„ã¾ã™</li>';
            }

            if (fDiagnosis || lDiagnosis) {
                diagnosis += '<p><strong>è©³ç´°åˆ†æï¼š</strong></p><ul>' + fDiagnosis + lDiagnosis + '</ul>';
            }

            diagnosis += '</div>';
            return diagnosis;
        }

        function getDiagnosisTurnover(turnoverRate, avgSpend) {
            if (turnoverRate <= 2) {
                return `
                    <div class="diagnosis excellent">
                        <h4><span class="diagnosis-icon">ğŸŒŸ</span>å®Ÿç¾å¯èƒ½ãªç›®æ¨™è¨­å®š</h4>
                        <p>å›è»¢ç‡2å›è»¢ä»¥ä¸‹ã§ã€éå¸¸ã«ç¾å®Ÿçš„ãªç›®æ¨™ã§ã™ã€‚</p>
                        <ul>
                            <li>âœ“ è½ã¡ç€ã„ãŸæ¥å®¢ãŒå¯èƒ½ã§ã™</li>
                            <li>âœ“ ã‚µãƒ¼ãƒ“ã‚¹å“è³ªã‚’ç¶­æŒã—ã‚„ã™ã„ã§ã™</li>
                            <li>âœ“ ã‚¹ã‚¿ãƒƒãƒ•ã¸ã®è² æ‹…ã‚‚é©æ­£ã§ã™</li>
                        </ul>
                        <p><strong>ã‚¢ãƒ‰ãƒã‚¤ã‚¹ï¼š</strong>ä½™è£•ã®ã‚ã‚‹é‹å–¶ã§ã€é¡§å®¢æº€è¶³åº¦ã®å‘ä¸Šã«æ³¨åŠ›ã§ãã¾ã™ã€‚</p>
                    </div>
                `;
            } else if (turnoverRate <= 3) {
                return `
                    <div class="diagnosis good">
                        <h4><span class="diagnosis-icon">ğŸ‘</span>é©æ­£ãªç›®æ¨™è¨­å®š</h4>
                        <p>å›è»¢ç‡3å›è»¢ä»¥ä¸‹ã§ã€ä¸€èˆ¬çš„ãªé£²é£Ÿåº—ã¨ã—ã¦å®Ÿç¾å¯èƒ½ãªç›®æ¨™ã§ã™ã€‚</p>
                        <ul>
                            <li>âœ“ æ¨™æº–çš„ãªå›è»¢ç‡ã§ã™</li>
                            <li>âœ“ åŠ¹ç‡çš„ãªé‹å–¶ãŒå¯èƒ½ã§ã™</li>
                            <li>âœ“ ãƒãƒ©ãƒ³ã‚¹ã®å–ã‚ŒãŸç›®æ¨™è¨­å®šã§ã™</li>
                        </ul>
                        <p><strong>ã‚¢ãƒ‰ãƒã‚¤ã‚¹ï¼š</strong>ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®åŠ¹ç‡åŒ–ã§ã€ã•ã‚‰ã«ä½™è£•ã®ã‚ã‚‹é‹å–¶ãŒå¯èƒ½ã§ã™ã€‚</p>
                    </div>
                `;
            } else if (turnoverRate <= 4) {
                return `
                    <div class="diagnosis warning">
                        <h4><span class="diagnosis-icon">âš ï¸</span>ã‚„ã‚„é«˜ã„å›è»¢ç‡</h4>
                        <p>å›è»¢ç‡ãŒ3å›è»¢ã‚’è¶…ãˆã¦ã„ã¾ã™ã€‚å®Ÿç¾ã«ã¯ã‹ãªã‚Šã®åŠªåŠ›ãŒå¿…è¦ã§ã™ã€‚</p>
                        <ul>
                            <li>âš  ã‚¹ã‚¿ãƒƒãƒ•ã¸ã®è² æ‹…ãŒå¤§ãããªã‚Šã¾ã™</li>
                            <li>âš  ã‚µãƒ¼ãƒ“ã‚¹å“è³ªã®ç¶­æŒãŒèª²é¡Œã§ã™</li>
                            <li>âš  ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®é«˜åº¦åŒ–ãŒå¿…è¦ã§ã™</li>
                        </ul>
                        <p><strong>æ”¹å–„ç­–ï¼š</strong></p>
                        <ul>
                            <li>â€¢ å®¢å˜ä¾¡ã‚’ä¸Šã’ã¦å¿…è¦å›è»¢ç‡ã‚’ä¸‹ã’ã‚‹ï¼ˆç¾åœ¨${avgSpend.toLocaleString()}å††ï¼‰</li>
                            <li>â€¢ ãƒ†ã‚¤ã‚¯ã‚¢ã‚¦ãƒˆã‚„ãƒ‡ãƒªãƒãƒªãƒ¼ã§å£²ä¸Šã‚’è£œå®Œ</li>
                            <li>â€¢ ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®å¾¹åº•çš„ãªåŠ¹ç‡åŒ–</li>
                        </ul>
                    </div>
                `;
            } else {
                return `
                    <div class="diagnosis danger">
                        <h4><span class="diagnosis-icon">ğŸš¨</span>éç¾å®Ÿçš„ãªå›è»¢ç‡</h4>
                        <p>å›è»¢ç‡ãŒ4å›è»¢ã‚’è¶…ãˆã¦ã„ã¾ã™ã€‚ã“ã®ç›®æ¨™é”æˆã¯æ¥µã‚ã¦å›°é›£ã§ã™ã€‚</p>
                        <ul>
                            <li>ğŸš¨ å®Ÿç¾å¯èƒ½æ€§ãŒæ¥µã‚ã¦ä½ã„ã§ã™</li>
                            <li>ğŸš¨ ã‚¹ã‚¿ãƒƒãƒ•ãŒç–²å¼Šã—ã€é›¢è·ç‡ãŒé«˜ã¾ã‚Šã¾ã™</li>
                            <li>ğŸš¨ ã‚µãƒ¼ãƒ“ã‚¹å“è³ªã®ä½ä¸‹ãŒé¿ã‘ã‚‰ã‚Œã¾ã›ã‚“</li>
                        </ul>
                        <p><strong>ç·Šæ€¥æ”¹å–„ç­–ï¼š</strong></p>
                        <ul>
                            <li>â€¢ å®¢å˜ä¾¡ã®å¤§å¹…å¼•ãä¸Šã’ã‚’æ¤œè¨ï¼ˆç¾åœ¨${avgSpend.toLocaleString()}å††ï¼‰</li>
                            <li>â€¢ ç›®æ¨™å£²ä¸Šã®è¦‹ç›´ã—</li>
                            <li>â€¢ ãƒ“ã‚¸ãƒã‚¹ãƒ¢ãƒ‡ãƒ«ã®å†æ¤œè¨</li>
                            <li>â€¢ å¸­æ•°ã®å¢—åŠ ã‚’æ¤œè¨</li>
                        </ul>
                    </div>
                `;
            }
        }

        function getDiagnosisLabor(laborCostRate) {
            if (laborCostRate <= 25) {
                return `
                    <div class="diagnosis excellent">
                        <h4><span class="diagnosis-icon">ğŸŒŸ</span>å„ªç§€ãªäººä»¶è²»ç®¡ç†</h4>
                        <p>äººä»¶è²»ç‡ãŒ25%ä»¥ä¸‹ã¨éå¸¸ã«å„ªã‚Œã¦ã„ã¾ã™ã€‚åŠ¹ç‡çš„ãªäººå“¡é…ç½®ãŒã§ãã¦ã„ã¾ã™ã€‚</p>
                        <ul>
                            <li>âœ“ é«˜ã„ç”Ÿç”£æ€§ã‚’å®Ÿç¾ã§ãã¦ã„ã¾ã™</li>
                            <li>âœ“ äººä»¶è²»ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãŒå„ªç§€ã§ã™</li>
                            <li>âœ“ åç›Šæ€§ã¸ã®è²¢çŒ®åº¦ãŒé«˜ã„ã§ã™</li>
                        </ul>
                        <p><strong>ã‚¢ãƒ‰ãƒã‚¤ã‚¹ï¼š</strong>ã“ã®æ°´æº–ã‚’ç¶­æŒã—ã¤ã¤ã€ã‚¹ã‚¿ãƒƒãƒ•ã®å¾…é‡æ”¹å–„ã«ã‚‚é…æ…®ã—ã¾ã—ã‚‡ã†ã€‚</p>
                    </div>
                `;
            } else if (laborCostRate <= 30) {
                return `
                    <div class="diagnosis good">
                        <h4><span class="diagnosis-icon">ğŸ‘</span>é©æ­£ãªäººä»¶è²»ç‡</h4>
                        <p>äººä»¶è²»ç‡ãŒ30%ä»¥ä¸‹ã§ã€æ¥­ç•Œæ¨™æº–ã®é©æ­£ç¯„å›²å†…ã§ã™ã€‚</p>
                        <ul>
                            <li>âœ“ æ¨™æº–çš„ãªäººä»¶è²»ç®¡ç†ãŒã§ãã¦ã„ã¾ã™</li>
                            <li>âœ“ ãƒãƒ©ãƒ³ã‚¹ã®å–ã‚ŒãŸäººå“¡é…ç½®ã§ã™</li>
                            <li>âœ“ å¥å…¨ãªçµŒå–¶çŠ¶æ…‹ã§ã™</li>
                        </ul>
                        <p><strong>ã‚¢ãƒ‰ãƒã‚¤ã‚¹ï¼š</strong>ã‚·ãƒ•ãƒˆç®¡ç†ã®æœ€é©åŒ–ã§ã€ã•ã‚‰ãªã‚‹æ”¹å–„ã®ä½™åœ°ãŒã‚ã‚Šã¾ã™ã€‚</p>
                    </div>
                `;
            } else if (laborCostRate <= 35) {
                return `
                    <div class="diagnosis warning">
                        <h4><span class="diagnosis-icon">âš ï¸</span>ã‚„ã‚„é«˜ã‚ã®äººä»¶è²»ç‡</h4>
                        <p>äººä»¶è²»ç‡ãŒ30%ã‚’è¶…ãˆã¦ã„ã¾ã™ã€‚æ”¹å–„ã®ä½™åœ°ãŒã‚ã‚Šã¾ã™ã€‚</p>
                        <ul>
                            <li>âš  äººä»¶è²»ãŒåˆ©ç›Šã‚’åœ§è¿«ã—ã¦ã„ã¾ã™</li>
                            <li>âš  ç”Ÿç”£æ€§ã®å‘ä¸ŠãŒå¿…è¦ã§ã™</li>
                            <li>âš  ã‚·ãƒ•ãƒˆç®¡ç†ã®è¦‹ç›´ã—ãŒæ±‚ã‚ã‚‰ã‚Œã¾ã™</li>
                        </ul>
                        <p><strong>æ”¹å–„ç­–ï¼š</strong></p>
                        <ul>
                            <li>â€¢ ã‚·ãƒ•ãƒˆã®æœ€é©åŒ–ï¼ˆãƒ”ãƒ¼ã‚¯ã‚¿ã‚¤ãƒ ã«é›†ä¸­é…ç½®ï¼‰</li>
                            <li>â€¢ ä½œæ¥­ã®åŠ¹ç‡åŒ–ã¨æ¨™æº–åŒ–</li>
                            <li>â€¢ ãƒãƒ«ãƒã‚¿ã‚¹ã‚¯åŒ–ã«ã‚ˆã‚‹ã‚¹ã‚¿ãƒƒãƒ•ã®ç”Ÿç”£æ€§å‘ä¸Š</li>
                            <li>â€¢ å£²ä¸Šé«˜ã®å¢—åŠ ã«ã‚ˆã‚‹äººä»¶è²»ç‡ã®æ”¹å–„</li>
                        </ul>
                    </div>
                `;
            } else {
                return `
                    <div class="diagnosis danger">
                        <h4><span class="diagnosis-icon">ğŸš¨</span>å±é™ºãªäººä»¶è²»ç‡</h4>
                        <p>äººä»¶è²»ç‡ãŒ35%ã‚’è¶…ãˆã¦ã„ã¾ã™ã€‚æ—©æ€¥ãªæ”¹å–„ãŒå¿…è¦ã§ã™ã€‚</p>
                        <ul>
                            <li>ğŸš¨ äººä»¶è²»ãŒéå‰°ã§ã™</li>
                            <li>ğŸš¨ åˆ©ç›Šç¢ºä¿ãŒéå¸¸ã«å›°é›£ã§ã™</li>
                            <li>ğŸš¨ çµŒå–¶ã‚’åœ§è¿«ã™ã‚‹è¦å› ã«ãªã£ã¦ã„ã¾ã™</li>
                        </ul>
                        <p><strong>ç·Šæ€¥æ”¹å–„ç­–ï¼š</strong></p>
                        <ul>
                            <li>â€¢ äººå“¡é…ç½®ã®å…¨é¢çš„ãªè¦‹ç›´ã—</li>
                            <li>â€¢ ä¸è¦ãªåŠ´åƒæ™‚é–“ã®å‰Šæ¸›</li>
                            <li>â€¢ ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®æŠœæœ¬çš„æ”¹é©</li>
                            <li>â€¢ ã‚»ãƒ«ãƒ•ã‚µãƒ¼ãƒ“ã‚¹åŒ–ã®æ¤œè¨</li>
                            <li>â€¢ å£²ä¸Šå¢—åŠ æ–½ç­–ã®å®Ÿæ–½</li>
                        </ul>
                    </div>
                `;
            }
        }

        function getDiagnosisTarget(profitRate, variableRate) {
            let diagnosis = '';
            
            if (profitRate >= 15) {
                diagnosis = `
                    <div class="diagnosis excellent">
                        <h4><span class="diagnosis-icon">ğŸŒŸ</span>é«˜ã„ç›®æ¨™åˆ©ç›Šç‡</h4>
                        <p>å–¶æ¥­åˆ©ç›Šç‡15%ä»¥ä¸Šã®ç›®æ¨™ã¯éå¸¸ã«é‡å¿ƒçš„ã§ã€é”æˆã§ãã‚Œã°å„ªç§€ãªçµŒå–¶ã§ã™ã€‚</p>
                        <ul>
                            <li>âœ“ é«˜ã„åç›Šæ€§ã‚’ç›®æŒ‡ã—ã¦ã„ã¾ã™</li>
                            <li>âœ“ æˆé•·æŠ•è³‡ã‚„äº‹æ¥­æ‹¡å¤§ãŒå¯èƒ½ã§ã™</li>
                            <li>âœ“ çµŒå–¶ã®å®‰å®šæ€§ãŒé«˜ã¾ã‚Šã¾ã™</li>
                        </ul>
                `;
            } else if (profitRate >= 10) {
                diagnosis = `
                    <div class="diagnosis good">
                        <h4><span class="diagnosis-icon">ğŸ‘</span>é©æ­£ãªç›®æ¨™åˆ©ç›Šç‡</h4>
                        <p>å–¶æ¥­åˆ©ç›Šç‡10-15%ã®ç›®æ¨™ã¯ã€é£²é£Ÿæ¥­ã¨ã—ã¦å¥å…¨ãªæ°´æº–ã§ã™ã€‚</p>
                        <ul>
                            <li>âœ“ æ¨™æº–çš„ãªåç›Šæ€§ã‚’ç›®æŒ‡ã—ã¦ã„ã¾ã™</li>
                            <li>âœ“ å®‰å®šã—ãŸçµŒå–¶ãŒå¯èƒ½ã§ã™</li>
                            <li>âœ“ é©åˆ‡ãªæŠ•è³‡ä½™åŠ›ãŒã‚ã‚Šã¾ã™</li>
                        </ul>
                `;
            } else if (profitRate >= 5) {
                diagnosis = `
                    <div class="diagnosis warning">
                        <h4><span class="diagnosis-icon">âš ï¸</span>ã‚„ã‚„ä½ã‚ã®ç›®æ¨™åˆ©ç›Šç‡</h4>
                        <p>å–¶æ¥­åˆ©ç›Šç‡ãŒ5-10%ã§ã™ã€‚ã‚‚ã†å°‘ã—é«˜ã„ç›®æ¨™è¨­å®šã‚’æ¤œè¨ã—ã¾ã—ã‚‡ã†ã€‚</p>
                        <ul>
                            <li>âš  æŠ•è³‡ä½™åŠ›ãŒé™ã‚‰ã‚Œã¾ã™</li>
                            <li>âš  æ€¥ãªæ”¯å‡ºã¸ã®å¯¾å¿œãŒå›°é›£ã§ã™</li>
                            <li>âš  äº‹æ¥­æ‹¡å¤§ã®ä½™è£•ãŒå°‘ãªã„ã§ã™</li>
                        </ul>
                `;
            } else {
                diagnosis = `
                    <div class="diagnosis danger">
                        <h4><span class="diagnosis-icon">ğŸš¨</span>ä½ã™ãã‚‹ç›®æ¨™åˆ©ç›Šç‡</h4>
                        <p>å–¶æ¥­åˆ©ç›Šç‡ãŒ5%æœªæº€ã§ã™ã€‚ã‚ˆã‚Šé«˜ã„ç›®æ¨™è¨­å®šãŒå¿…è¦ã§ã™ã€‚</p>
                        <ul>
                            <li>ğŸš¨ çµŒå–¶ã®ä½™è£•ãŒã»ã¨ã‚“ã©ã‚ã‚Šã¾ã›ã‚“</li>
                            <li>ğŸš¨ ãƒˆãƒ©ãƒ–ãƒ«æ™‚ã®å¯¾å¿œãŒå›°é›£ã§ã™</li>
                            <li>ğŸš¨ æŒç¶šçš„ãªçµŒå–¶ãŒå±ã¶ã¾ã‚Œã¾ã™</li>
                        </ul>
                `;
            }

            // å¤‰å‹•è²»ç‡ã®è¨ºæ–­
            if (variableRate > 60) {
                diagnosis += `
                    <p><strong>âš ï¸ å¤‰å‹•è²»ç‡ãŒé«˜ã™ãã¾ã™ï¼ˆ${variableRate}%ï¼‰</strong></p>
                    <p>åŸä¾¡ç‡ã¨äººä»¶è²»ç‡ã®åˆè¨ˆãŒ60%ã‚’è¶…ãˆã¦ã„ã¾ã™ã€‚ç›®æ¨™é”æˆã®ãŸã‚ã«ã¯ã€å¤‰å‹•è²»ã®å‰Šæ¸›ãŒä¸å¯æ¬ ã§ã™ã€‚</p>
                    <ul>
                        <li>â€¢ åŸä¾¡ç‡ã®å‰Šæ¸›ã‚’æœ€å„ªå…ˆã§å®Ÿæ–½</li>
                        <li>â€¢ äººä»¶è²»ã®åŠ¹ç‡åŒ–</li>
                        <li>â€¢ ä¾¡æ ¼è¨­å®šã®è¦‹ç›´ã—</li>
                    </ul>
                `;
            }

            diagnosis += '</div>';
            return diagnosis;
        }
    </script>
</body>
</html>
